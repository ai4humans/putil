language: python

build_image: shippableimages/ubuntu1204_python

python:
  - 2.7

# Install Matplotlib pre-requisites that do not get pip-installed
before_install:
  - shippable_retry apt-get update
  - shippable_retry apt-get install -y libfreetype6-dev
  - shippable_retry apt-get install -y liblapack-dev
  - shippable_retry apt-get install -y libpng12-dev
  - shippable_retry apt-get install -y python-dev
  - shippable_retry apt-get install -y gfortran

install:
  - pip install -r requirements.txt --use-mirrors
  - python setup.py sdist
  - pip install dist/putil-0.9.tar.gz

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - py.test -s -vv --junitxml=shippable/testresults/pytest.xml
  - py.test -x --cov-config .coveragerc --cov putil --cov-report xml

notifications:


  on_success: change
  on_failure: always
